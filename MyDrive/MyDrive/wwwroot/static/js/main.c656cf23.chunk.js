(this.webpackJsonpmydriveweb=this.webpackJsonpmydriveweb||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(0),o=n.n(r),s=n(20),a=n.n(s),i=(n(30),n(7)),u=(n(31),n(10)),l=n(4),j=n(23),d=o.a.createContext(),b=n(42),h=n(21),O=n(11),f=n.n(O),x="https://localhost:44370/";function p(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(null),a=Object(i.a)(s,2),j=a[0],O=a[1],p=Object(r.useState)(!1),g=Object(i.a)(p,2),v=g[0],m=g[1],w=Object(l.f)(),C=Object(r.useContext)(d),S=function(e){if(e){var t=Object(h.a)(e);console.log(C),C.updateContext({userId:t.userid,userName:t.username,folderId:t.rootfolderid,token:e}),w.push("/")}else m(!1)},y=function(e){m(!0)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Welcome to MyDrive, or your drive! Please log in"}),Object(c.jsx)("h2",{children:"if you have not registered before, please register first"}),Object(c.jsx)(u.b,{to:"/register",children:"Switch to register"}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("h2",{children:"User name"}),Object(c.jsx)("input",{className:"username",onChange:function(e){o(e.target.value)}}),Object(c.jsx)("h2",{children:"Password"}),Object(c.jsx)("input",{className:"password",type:"password",onChange:function(e){O(e.target.value)}}),Object(c.jsx)(b.a,{onClick:function(){var e=(new TextEncoder).encode(j);f.a.resolve(crypto.subtle.digest("SHA-256",e)).then((function(e){var t=Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("");!function(e,t,n,c){var r=new XMLHttpRequest;r.onload=function(){return n(r.response)},r.onerror=function(){return c(r.status)},r.open("GET","".concat(x,"user/authenticate?username=").concat(e,"&password=").concat(t)),r.send()}(n,t,S,y)}))},children:"Login"}),v&&Object(c.jsx)("div",{children:"Authentication failed, please try again"})]})}function g(){var e=Object(r.useContext)(d);return e.globalContext&&e.globalContext.userId?f.a.resolve(function(e,t,n,c,r){var o=new XMLHttpRequest;o.onload=function(){return c(o.response)},o.onerror=function(){return r(o.status)},o.open("GET","".concat(x,"user/listfolder?username=").concat(t,"&token=").concat(n,"&folderid=").concat(e)),o.send()}(e.globalContext.userId,e.globalContext.folderId,e.globalContext.token,(function(){}),(function(){}))).then((function(e){JSON.parse(e)})).catch((function(e){})):Object(c.jsx)(l.a,{to:"/login"})}function v(){var e=function(){S(!0)},t=function(e){A(e)},n=Object(r.useState)(null),o=Object(i.a)(n,2),s=o[0],a=o[1],l=Object(r.useState)(null),j=Object(i.a)(l,2),d=j[0],h=j[1],O=Object(r.useState)(null),p=Object(i.a)(O,2),g=p[0],v=p[1],m=Object(r.useState)(!1),w=Object(i.a)(m,2),C=w[0],S=w[1],y=Object(r.useState)(null),N=Object(i.a)(y,2),k=N[0],A=N[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Register MyDrive account here"}),Object(c.jsx)("br",{}),Object(c.jsx)("h2",{children:"User name"}),Object(c.jsx)("input",{className:"username",onChange:function(e){a(e.target.value)}}),Object(c.jsx)("h2",{children:"Password"}),Object(c.jsx)("input",{className:"password",type:"password",onChange:function(e){h(e.target.value)}}),Object(c.jsx)("h2",{children:"Repeat password"}),Object(c.jsx)("input",{className:"password2",type:"password",onChange:function(e){v(e.target.value)}}),Object(c.jsx)("br",{}),d!==g&&Object(c.jsx)("div",{className:"passwordunmatch",children:"passwords don't match"}),Object(c.jsx)(b.a,{disabled:!d||!g||d!==g,onClick:function(){var n=(new TextEncoder).encode(d);f.a.resolve(crypto.subtle.digest("SHA-256",n)).then((function(n){var c=Array.from(new Uint8Array(n)).map((function(e){return e.toString(16).padStart(2,"0")})).join("");!function(e,t,n,c){var r=new XMLHttpRequest;r.onload=n,r.onerror=function(){return c(r.status)},r.open("GET","".concat(x,"user/create?username=").concat(e,"&password=").concat(t)),r.send()}(s,c,e,t)}))},children:"Create account"}),C&&Object(c.jsx)("div",{children:Object(c.jsxs)("h2",{children:["Your account has been created successfully, please log in",Object(c.jsx)(u.b,{to:"/login",children:"Login"})]})}),null!==k&&void 0!==k&&Object(c.jsx)("div",{children:Object(c.jsx)("h2",{children:"Something went wrong, please try again"})})]})}var m=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],o=t[1];return Object(c.jsx)(d.Provider,{value:{globalContext:n,updateContext:function(e){o(j.a.defaults(e,n))}},children:Object(c.jsxs)(u.a,{children:[Object(c.jsx)(l.b,{path:"/",children:Object(c.jsx)(g,{})}),Object(c.jsx)(l.b,{path:"/login",children:Object(c.jsx)(p,{})}),Object(c.jsx)(l.b,{path:"/register",children:Object(c.jsx)(v,{})})]})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),o(e),s(e)}))};a.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(m,{})}),document.getElementById("root")),w()}},[[41,1,2]]]);
//# sourceMappingURL=main.c656cf23.chunk.js.map