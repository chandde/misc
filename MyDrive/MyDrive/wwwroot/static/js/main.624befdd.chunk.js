(this.webpackJsonpmydriveweb=this.webpackJsonpmydriveweb||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(0),s=n.n(c),a=n(20),o=n.n(a),i=(n(30),n(5)),u=(n(31),n(10)),l=n(4),j=n(23),d=s.a.createContext(),b=n(42),h=n(21),O=n(12),f=n.n(O),x="https://localhost:44370/";function g(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),o=Object(i.a)(a,2),j=o[0],O=o[1],g=Object(c.useState)(!1),p=Object(i.a)(g,2),v=p[0],m=p[1],w=Object(l.f)(),S=Object(c.useContext)(d),y=function(e){if(e){var t=Object(h.a)(e);console.log(S),S.updateContext({userId:t.userid,userName:t.username,folderId:t.rootfolderid,token:e}),w.push("/")}else m(!1)},C=function(e){m(!0)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Welcome to MyDrive, or your drive! Please log in"}),Object(r.jsx)("h2",{children:"if you have not registered before, please register first"}),Object(r.jsx)(u.b,{to:"/register",children:"Switch to register"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("h2",{children:"User name"}),Object(r.jsx)("input",{className:"username",onChange:function(e){s(e.target.value)}}),Object(r.jsx)("h2",{children:"Password"}),Object(r.jsx)("input",{className:"password",type:"password",onChange:function(e){O(e.target.value)}}),Object(r.jsx)(b.a,{onClick:function(){var e=(new TextEncoder).encode(j);f.a.resolve(crypto.subtle.digest("SHA-256",e)).then((function(e){var t=Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("");!function(e,t,n,r){var c=new XMLHttpRequest;c.onload=function(){return n(c.response)},c.onerror=function(){return r(c.status)},c.open("POST","".concat(x,"authenticate")),c.send(JSON.stringify({UserName:e,Password:t}))}(n,t,y,C)}))},children:"Login"}),v&&Object(r.jsx)("div",{children:"Authentication failed, please try again"})]})}function p(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useContext)(d);if(!n){if(!a.globalContext||!a.globalContext.userId)return Object(r.jsx)(l.a,{to:"/login"});!function(e,t,n,r,c){var s=new XMLHttpRequest;s.onload=function(){return r(s.response)},s.onerror=function(){return c(s.status)},s.open("POST","".concat(x,"listfolder")),s.setRequestHeader("Authorization","Bearer ".concat(n)),s.send(JSON.stringify({UserId:t,FolderId:e}))}(a.globalContext.userId,a.globalContext.folderId,a.globalContext.token,(function(e){var t=JSON.parse(e);s(t)}),(function(){}))}return n&&0!==n.length?Object(r.jsx)("div",{children:"You have ".concat(n.length," files here!")}):Object(r.jsx)("div",{children:"Seems you don't have anything here.."})}function v(){var e=function(){y(!0)},t=function(e){I(e)},n=Object(c.useState)(null),s=Object(i.a)(n,2),a=s[0],o=s[1],l=Object(c.useState)(null),j=Object(i.a)(l,2),d=j[0],h=j[1],O=Object(c.useState)(null),g=Object(i.a)(O,2),p=g[0],v=g[1],m=Object(c.useState)(!1),w=Object(i.a)(m,2),S=w[0],y=w[1],C=Object(c.useState)(null),N=Object(i.a)(C,2),P=N[0],I=N[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Register MyDrive account here"}),Object(r.jsx)("br",{}),Object(r.jsx)("h2",{children:"User name"}),Object(r.jsx)("input",{className:"username",onChange:function(e){o(e.target.value)}}),Object(r.jsx)("h2",{children:"Password"}),Object(r.jsx)("input",{className:"password",type:"password",onChange:function(e){h(e.target.value)}}),Object(r.jsx)("h2",{children:"Repeat password"}),Object(r.jsx)("input",{className:"password2",type:"password",onChange:function(e){v(e.target.value)}}),Object(r.jsx)("br",{}),d!==p&&Object(r.jsx)("div",{className:"passwordunmatch",children:"passwords don't match"}),Object(r.jsx)(b.a,{disabled:!d||!p||d!==p,onClick:function(){var n=(new TextEncoder).encode(d);f.a.resolve(crypto.subtle.digest("SHA-256",n)).then((function(n){var r=Array.from(new Uint8Array(n)).map((function(e){return e.toString(16).padStart(2,"0")})).join("");!function(e,t,n,r){var c=new XMLHttpRequest;c.onload=n,c.onerror=function(){return r(c.status)},c.open("POST","".concat(x,"createuser")),c.send({UserName:e,Password:t})}(a,r,e,t)}))},children:"Create account"}),S&&Object(r.jsx)("div",{children:Object(r.jsxs)("h2",{children:["Your account has been created successfully, please log in",Object(r.jsx)(u.b,{to:"/login",children:"Login"})]})}),null!==P&&void 0!==P&&Object(r.jsx)("div",{children:Object(r.jsx)("h2",{children:"Something went wrong, please try again"})})]})}var m=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(r.jsx)(d.Provider,{value:{globalContext:n,updateContext:function(e){s(j.a.defaults(e,n))}},children:Object(r.jsxs)(u.a,{children:[Object(r.jsx)(l.b,{path:"/",children:Object(r.jsx)(p,{})}),Object(r.jsx)(l.b,{path:"/login",children:Object(r.jsx)(g,{})}),Object(r.jsx)(l.b,{path:"/register",children:Object(r.jsx)(v,{})})]})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(m,{})}),document.getElementById("root")),w()}},[[41,1,2]]]);
//# sourceMappingURL=main.624befdd.chunk.js.map